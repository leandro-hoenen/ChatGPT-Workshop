<!-- app/views/scenarios/evaluations.html.erb -->
<h1>Evaluations for <%= @scenario.name %></h1>

<% @evaluations_by_task.each do |task, evaluations| %>
  <div class="card mb-4">
    <div class="card-header">
      <h2>Task: <%= task.name %></h2>
    </div>
    <div class="card-body">
      <p><%= task.description %></p>
      <% if evaluations.any? %>
        <div class="table-responsive">
          <table class="table table-bordered table-hover">
            <thead>
              <tr>
                <th>Accuracy</th>
                <th>Accuracy Description</th>
                <th>Relevance</th>
                <th>Relevance Description</th>
                <th>Bias</th>
                <th>Bias Description</th>
                <th>Comments</th>
                <th>Submitted At</th>
                <th>Submitted By</th>
              </tr>
            </thead>
            <tbody>
              <% evaluations.each do |evaluation| %>
                <tr>
                  <td><%= evaluation.accuracy %></td>
                  <td class="text-wrap"><%= evaluation.accuracy_description %></td>
                  <td><%= evaluation.relevance %></td>
                  <td class="text-wrap"><%= evaluation.relevance_description %></td>
                  <td><%= evaluation.bias %></td>
                  <td class="text-wrap"><%= evaluation.bias_description %></td>
                  <td class="text-wrap"><%= evaluation.comments %></td>
                  <td><%= evaluation.created_at %></td>
                  <td><%= evaluation.user.email %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <p>No evaluations for this task.</p>
      <% end %>
    </div>
  </div>
<% end %>

<%= link_to 'Back to Scenarios', scenarios_path, class: 'btn btn-primary' %>
